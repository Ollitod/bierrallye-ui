import{c as p}from"./chunk-5YRAG2Q4.js";import{V as m}from"./chunk-EDQHVCWM.js";import{a as c}from"./chunk-RYNRYX7J.js";import{_ as n,da as s,m as a}from"./chunk-J5KHPRBR.js";var u=(()=>{let t=class t{constructor(){this.TOKEN="JWT"}storeToken(e){localStorage.setItem(this.TOKEN,e)}getToken(){return localStorage.getItem(this.TOKEN)}removeToken(){localStorage.removeItem(this.TOKEN)}isExpired(){let e=this.getToken();if(e){let r=this.getTokenExpirationDate(e);return!!(r&&r<new Date)}return!0}getTokenExpirationDate(e){let r=e.split(".");if(r.length===3){let o=JSON.parse(atob(r[1]));if(o&&o.exp)return new Date(o.exp*1e3)}return null}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var x=(()=>{let t=class t{constructor(e,r,o){this.http=e,this.tokenService=r,this.router=o,this.user=new a(void 0)}loginUser(){this.http.get(m+"user").subscribe(e=>this.user.next(e))}logout(){this.invalidateUser(),this.router.navigate(["/login"])}invalidateUser(){this.user.next(void 0),this.tokenService.removeToken()}};t.\u0275fac=function(r){return new(r||t)(s(c),s(u),s(p))},t.\u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();export{u as a,x as b};
